# Полезные вещи при работе с arduino
* Оглавление
{:toc}

# Начало работы
Всё необходимое я заказывал на AliExpress. Для начала будет очень полезным заказать
[https://ru.aliexpress.com/item/Free-shipping-RFID-learning-kit-upgraded-version-starter-kit-for-arduino/2044999580.html](StarterKit)
в комплекте идет Arduino Mega которая содержит огромное количество контактов, которых хватит на любой мыслимый проект и много памяти.
Немаловажным является совместимость со всеми операционными системами (об этом подробнее ниже).

# Книги
В комплекте идет электронная [книга c 32 проектами](http://wiki.keyestudio.com/index.php/Ks0077(78,_79)_keyestudio_ARDUINO_Super_Learning_Kit)
(желтая книжечка это просто листок со списком деталей). Не смотря на качество кода, который оставляет желать лучшего, всё работает.
Если что-то не заводится нужно просто проверить подключение.
Самым главным минусом является отстутствие пояснений к тому, почему это сделано именно так (подробности будут ниже).
Где-то с середины я уже старался писать код сам и экспериментировать.
Для реальных проектов я использовал заказанные детали, чтобы комплект деталей из кита остался полноценным.

Пока шел кит, я купил себе книгу [Джереми Блум. Изучаем Arduino. Инструменты и методы технического волшебства](http://www.ozon.ru/context/detail/id/31350922/)
после которой некоторые вещи типа устранения дребезга кнопок, pull-up и pull-down резисторов для меня не были открытием.

# Детали

## IR-пульт
![IR](http://wiki.keyestudio.com/images/6/6b/7722.png) в комплект к пульту не входила батарейка типоразмера СК2025
и пришлось идти покупать отдельно. Что интересно, 20 – это диаметр в мм, а 25 – толщина в 2.5мм. Очень удобно запоминать.

## Рэле
![Relay](http://wiki.keyestudio.com/images/f/f0/7627.png) применяется для безопасного соединения двух разных линий питания,
там где транзистора не хватит. Поскольку соединение замыкается и размыкается физическим переключателем, то на голой релешке
в момент размыкания появится обратный ток, который может пожечь контакты на вашей ардуине. Ток этот утилизируют при помощи диода.
На модуле эти диоды _вроде как_ есть и можно подключать прямо так. Более мощная линия помимо земли содержит два контакта:
NO (normally open – разомкнуто) и NC (normally closed - замкнуто) важно не перепутать подключение,
иначе при выключенном контроллере то что подключено к рэле будет постоянно работать.

## Датчик влажности
![Soil moisture sensor](http://wiki.keyestudio.com/images/5/51/7734.png) для меня настоящим открытием стал гальванический эффект.
Этот датчик растворяется в момент использования. Первый датчик я подключил напрямую к 5v и одна из ног полностью растворилась за неделю.
Второй датчик я подключил к цифровому пину и напряжение подаю только на момент измерения, держится пару тройку недель, но тоже растворяется – даже при цифровом 0 все равно подается ток 1mV. Есть идея попробовать подключить через транзистор **TODO**
или периодически менять направление тока между ногами.
Я сразу заказал [пачку датчиков](https://ru.aliexpress.com/store/product/Soil-Moisture-Sensor/1950989_32532715392.html).

## Датчик дыма
![Gas sendor](http://wiki.keyestudio.com/images/0/01/7629.png) при работе нагревается

## Дисплей на 4 цифры
![4x Dispaly](http://wiki.keyestudio.com/images/f/fe/7618.png) ![8x8 display](http://wiki.keyestudio.com/images/8/8f/7619.png)
неожиданным открытием для меня стало то, что в каждом разряде цифры отнюдь не запоминаются и нужно очень быстро
по-очереди включать каждый разряд. Поэтому sleep и низкое энергопотребление с такими индикаторами несовместимо.

## Текстовый дисплей
![lcd](http://wiki.keyestudio.com/images/9/95/7620.png) самые популярны LCD1602 и LCD2004.
Как и с батарейками название говорит само за себя: LCM1602 – 16 символов в 2 строки. Прямое подключние к ардуине потратит 16 пинов,
что для mega еще терпимо, то для nano вообще грустно. Да и подключение очень муторное и нечревато ошибками.
Поэтому не парьтесь и сразу закупайте сразу [I2C адаптер](https://ru.aliexpress.com/item/LCD-16x2-16x4-20x2-20x4-adaptor-to-I2C/32635555276.html),
а в дальнейшем лучше сразу покупать с припаянными модулями [1602](https://www.aliexpress.com/item/LCD1602-I2C-LCD-1602-module-Blue-screen-IIC-I2C-for-arduino-LCD1602-Adapter-plate/32707720115.html)
или [2004](https://www.aliexpress.com/item/IIC-I2C-TWI-Serial-LCD-2004-20x4-Display-Shield-Blue-Backlight-for-Arduino/32599904427.html).

![charmap](http://4.bp.blogspot.com/_qiZ6auXA3gw/TUq5YqTk3GI/AAAAAAAAAsU/durFeJPXcJE/s1600/lcd.jpg) Отдельным вызовом является несколько стандартных распиновок у адаптера на базе pca8574 и пока вы не укажете правильную,
вы будете видеть на экране мусор и кракозябры, которые на самом деле китайские символы. Я убил огромное количество времени, пока не понял как его правильно подключать.
Самые распространенные конфигурации для [en,rw,rs,d4,d5,d6,d7,bl]: [2,1,0,4,5,6,7,3] и [4,5,6,0,1,2,3,7].
Для отображения данных использую библиотеку [NewLiquidCrystal](https://bitbucket.org/fmalpartida/new-liquidcrystal/wiki/Home).

## DS3231 Часы реального времени
![realtime](http://wiki.keyestudio.com/images/c/cc/7732.png) прежде чем начать пользоваться, необходимо установить время.
Для простоты, если не требуется большая точность, можно взять время компиляции при помощи макросов
[__DATE__ и __TIME__](http://www.l8ter.com/?p=417) и распарсить их. После этого можно залить основную прошивку.
Шедшие с kit часы не запоминали время, возможно я не полностью вытащил перемычку под батарейкой.
Для работы с часами через i2c используется [библиотека](https://github.com/rodan/ds3231). Аккуратный модуль у
[RobotDyn](https://ru.aliexpress.com/item/RTC-Real-Time-Clock-DS1307-module-with-battery/32530897478.html).

## 9g servo
![servo](http://wiki.keyestudio.com/images/3/31/7723.png) При установке угла в 180? **TODO** серво-привод начинал непрерывно вращаться

## CMOS Камера OV7670
Не пытался подключить. Есть книга на 200 страниц
[Beginning Arduino ov7670 Camera Development](https://www.amazon.com/Beginning-Arduino-ov7670-Camera-Development/dp/1512357987).
При этом есть две версии с Framebuffer и без, та которая с буфером помечена как FIFO и стоит в несколько раз дороже.
Отличительной особенностью является микросхема Averlogic AL4228-PBF, которая упрощает работу.

## ESP8266
**TODO**
продолжение следует

# Инструменты
**TODO**

# Провода и коннекторы
**TODO**
